<!--  -->
<div class="w-full flex flex-row justify-end p-4">
  <button mat-raised-button color="warn">Start Over</button>
</div>
<mat-stepper #productEditorStepper>
  <mat-step
    #productStep
    [stepControl]="productForm.formGroup"
    label="Create Product"
  >
    <wp-product-form
      #productForm
      submitButtonLabel="Next"
      (submittedEventSuccess)="handleProductSubmitSuccessEvent($event)"
      formStoreName="ProductEditorProductForm"
    ></wp-product-form>
  </mat-step>

  <!--  Prices -->
  <mat-step #priceStep label="Pricing">
    <mat-tab-group #priceTabGroup>
      <mat-tab label="Default Price">
        <div class="flex flex-row items-center gap-4 py-4">
          <button
            mat-flat-button
            color="accent"
            (click)="nextPriceTab(priceTabGroup.selectedIndex)"
          >
            <mat-icon>info</mat-icon>
            Skip
          </button>
          <div class="text-orange-600">
            <p>This form will update all prices!</p>
            <p>If you want to create specific prices, click the skip button.</p>
          </div>
        </div>
        <div class="flex flex-col py-4">
          <wp-price-raw-form
            (submittedEvent)="handleDefaultPriceSubmitEvent($event)"
            submitButtonLabel="Next"
            formStoreName="ProductEditorDefaultPriceForm"
          ></wp-price-raw-form>
        </div>
      </mat-tab>

      <ng-container *ngIf="state() as state">
        @for(item of state.price.data;track item; let index=$index;){
        <mat-tab [label]="item['priceLevelName']">
          <div class="flex flex-col py-4">
            <wp-price-update-form
              [entityId]="item['id']"
              submitButtonLabel="Next"
              (submittedEventSuccess)="
                nextPriceTab(priceTabGroup.selectedIndex + 1)
              "
            ></wp-price-update-form>
          </div>
        </mat-tab>
        }
      </ng-container>
      <!--  -->
    </mat-tab-group>

    <!--  -->
  </mat-step>

  <!-- Serial Number Step -->
  <mat-step #serialNumberStep label="Serial Number">
    <wp-serial-number-raw-form
      #serialNumberForm
      submitButtonLabel="Next"
      (submittedEvent)="handleSerialNumberSubmitEvent($event)"
    ></wp-serial-number-raw-form>
  </mat-step>

  <!-- Quantity Step -->
  <mat-step #quantityStep label="Quantity">
    Adding quantity for each sku
  </mat-step>

  <!-- Final Step -->
  <mat-step #finalStep label="Complete">
    <div
      class="flex flex-col w-full gap-4 p-4 justify-center items-center content-center"
    >
      <p>Good Job ðŸ˜€.</p>
      <p>You made it!</p>

      <button class="max-w-32" mat-raised-button color="primary">Finish</button>
    </div>
  </mat-step>
</mat-stepper>
