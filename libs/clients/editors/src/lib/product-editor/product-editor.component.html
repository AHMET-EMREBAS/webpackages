<mat-stepper #productEditorStepper [linear]="true">
  <mat-step
    #productStep
    [stepControl]="productForm.formGroup"
    label="Create Product"
  >
    <wp-product-form
      #productForm
      submitButtonLabel="Next"
      (submittedEventSuccess)="handleProductSubmitSuccessEvent($event)"
      formStoreName="ProductEditorProductForm"
    ></wp-product-form>
  </mat-step>

  <!--  Prices -->
  <mat-step #priceStep label="Pricing">
    <mat-tab-group #priceTabGroup>
      <mat-tab label="Default Price">
        <div class="flex flex-row items-center gap-4 py-4">
          <div class="text-orange-600">
            <p>This operation updates all prices levels!</p>
          </div>
        </div>
        <div class="flex flex-col py-4">
          <wp-price-raw-form
            #defaultPriceForm
            (submittedEvent)="handleDefaultPriceSubmitEvent($event)"
            submitButtonLabel="Next"
            formStoreName="ProductEditorDefaultPriceForm"
          ></wp-price-raw-form>
        </div>
      </mat-tab>

      <ng-container>
        @for(item of state().price.data;track item;){
        <mat-tab [label]="item['priceLevelName']">
          <div class="flex flex-col py-4">
            <wp-price-update-form
              [entityId]="item['eid']"
              submitButtonLabel="Next"
              (submittedEventSuccess)="
                nextPriceTab(priceTabGroup.selectedIndex + 1)
              "
              [formStoreName]="'PriceForm ' + item.id"
            ></wp-price-update-form>
          </div>
        </mat-tab>
        }
      </ng-container>
      <!--  -->
    </mat-tab-group>

    <!--  -->
  </mat-step>

  <!-- Serial Number Step -->
  <mat-step
    #serialStep
    [stepControl]="serialNumberForm.formGroup"
    label="Serial Number"
  >
    <wp-serial-number-raw-form
      #serialNumberForm
      submitButtonLabel="Next"
      (submittedEvent)="handleSerialNumberSubmitEvent($event)"
    ></wp-serial-number-raw-form>
  </mat-step>

  <!-- Final Step -->
  <mat-step #finalStep label="Complete">
    <div
      class="flex flex-col w-full gap-4 p-4 justify-center items-center content-center"
    >
      <p>Good Job</p>
      <p>ðŸ˜€</p>
      <p>You made it!</p>

      <button
        class="max-w-32"
        mat-raised-button
        color="primary"
        (click)="restartSteps()"
      >
        New
      </button>
    </div>
  </mat-step>
</mat-stepper>
<div class="flex flex-row-reverse gap-4 px-6">
  <button mat-raised-button color="accent" (click)="restartSteps()">
    Restart Stepper
  </button>
</div>
